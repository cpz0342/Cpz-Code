# CSP-J 2022 游记

## 第一轮

貌似是开学几天后的一个晚自修，教练把我们几个参加信竞的同学叫到教室外面，问我们要不要参加这个CSP-J。只剩10多天了。

对于这个比赛，我是早有耳闻。我当时在信竞这方面已经颓废了半年，但毕竟刷了几百道题，基础还是有一点的，虽然很多算法都忘了。既然以前付出了这么多努力，怎么可能不去呢？
而且，这一去，就必定要胜利，我是这么认为的。

前面缺了几节课，是关于二进制的，就用一节课晚自习补了一下。之后发了一堆卷子和材料，尽量看了一下。考前两天发了近三年的J组卷子，根本没时间看，只做了选择题。
考前的倒数第2节课，讲了排列组合。最后一节课讲了阅读程序题。我当时想的是选择题尽量错3题以内，阅读程序和完善程序题各做对1题，其他的乱蒙，应该就可以过了。而且我分析了一下历年的卷子，对于CSP不会做的题应该选B，而不是选C。（~~毕竟判断题哪里有选C的~~）

然后9月18日上考场，初中部大约有四五十人参赛，其中有四五个女生，也有初一的学弟（羡慕他们，我初一的这个时候才刚知道CSP，而且那年FJ J组也取消了），一个大巴的人闹哄哄的。

也是意料之中的，参加比赛的女生很少，我这个考场40个人里只有4个女生。我们学校在这个考场考的好像有三四个，但我就认识cjy，他是坐在考场的最后一个位置。

发到试卷先看了看，MD居然一道排列组合也没有？考点和往年的侧重点好像有所不同，学到的都没考。还有这个洪水填充是什么鬼？变量名长的一批，反正我看到这种代码就被吓到了。

比较纠结的几题说一下。第1题应该是选A，因为我记得C++是面向对象，C是面向过程，printf函数是C和c++都有，而且这什么类成员函数、Class、Struct、派生类听起来好像很高级。

第7题哈夫曼编码听说过，但忘了是什么意思，就选了C，因为C有两种情况。

第12题蒙了个B。做第14题时很开心自己注意到了子串可以是空串。

阅读程序就第一题有把握，反正是位运算，硬算就好了。第二题连程序都懒得看，就做了个算时间复杂度的题。第三题代了个数据进去模拟，算了十几步还没算出来，就先看看选项。很明显，这道程序就是求平方根的，直接做出32 33两道选择。第34题，我以为C++会有浮点数误差，然后就选了B还是D……结果是A。

完善程序第一题，知道vector，但不知道第9行的`fac.reserve((int)ceil(sqrt(n)));`是什么意思。不过这也没什么影响，很轻松就做出来了。答案是ABCDA，感觉有点奇怪。第二题好像DFS，但我对自己一点自信都没有，也没看代码，直接全都选B了，然后去搞前面遗留下的几道选择题。自己觉得大概五六十分，要过的话，还是有点危险。

中午回去看了一下洛谷，结果大家都在说最后一题真的是洪“水”填充，好吧，我连代码都看不懂。最后两题的答案都是ABCDA，好家伙，CCF你认真的吗？一堆人都在说自己考八九十分，我是真的慌。

晚上对了教练发的答案，估计63pts。我很担心自己过不了，就AFO了（毕竟有我妈的大力“支持”）。第二天才发现自己把73算成了63，松了一口气。

回学校后，xyk说他只考了四十几分，wjy说她只考了三十几分。
但真正的成绩，xyk好像是59pts，wjy是44pts（差二等分数线1pts），我是70.5pts。泉州的晋级分数线是55pts。本来成绩好像是周一中午12:00出的，但到了第二天中午，教练叫我们去机房查成绩，还是进不去NOI的官网。教练说她知道我们的成绩，只过了十几个人，但还是让我们自己查。~~（我的内心：这么简单的比赛，随便选选B不就过了，他们也太逊了吧。）~~ zzx说自己考了79分，非常厉害，估计是全机房最高了。最后成绩是晚上回家父母告诉我的。

最后吐槽一下这个比赛时间，9月18日，都知道是一个什么日子。早上考试时响起了防空警报，不过影响不大。而下午就有点吓人：当我下午打到风神录三面时突然地震了，这是我第一次亲身感受地震。

---


## 第二轮

其实我完全就是一个蒟蒻，很多算法都听说过，或者接触过一点点理论知识，但就是不会写代码。看看《一本通》的目录吧，我那时候会的只有高精度加减乘、排序、递归、递推、DFS（做过几题），还有数据结构接触过栈和二叉树，dp、图论几乎不会，不过对有向图、无向图、出度、连通分量这些基本概念，以及dp适用问题的特点，我还是懂的，但在考试时没用。

第二轮正好在运动会后一天，期中考前一周左右。

运动会这几天，我经常看《一本通》里关于dp的内容，因为考的概率很大。但问题是，单看书不上机是没有用的。除了第一道例题“数字三角形”，其他的dp题多我来说都很难理解，不抱什么希望了。

学校给我们开了机房，但去的人大部分是参加数学建模的。我去了一个下午，只做了三道深搜题。我看到的很多人都在打游戏，包括wyc，据说他们团队的选题就是这个游戏的攻略……但我就看到他们打了好几个小时，论文毫无进展。

我们学校初中部参加第二轮的就十几个人，主要是初二的，只有我一个女生。

进了泉州一中，我们也不知道考场在哪，就跟着别的学校的人走了。

同一个考场里认识的人还挺多的，比如ycc（初一），yzr，xyk，pzh等。进考场时，有一个女的给我们搜身。进去后就坐了半个小时，电脑桌上都放着一个黑色的盒子，和电脑连着。监考人员说什么电脑都是云主机，叫我们不要动那个黑盒子。

开始了！试题的解压密码是mountain2022。先大概看了一下题。T1很水；T2不知道，但题面这么短，应该不难；T3有点像以前CSP-S的一道题，和表达式有关，应该是要用到栈的；T4一看就不会，但直觉告诉我是dp，因为前三题都肯定不是dp。

开T1。上来就一个pow函数，注意到数据范围，就换了循环，做完了。

开T2。讲个特别弱智的事，题面里不是有一句 $n_i = p_i \times q_i,e_i \times d_i = (p_i - 1)(q_i - 1) + 1 $ 吗，然后我把 $ q_i,e_i $ 看成了一个整体，以致于我一直在想它是什么意思（可能是一个数对吧），过了好久才发现这一大串是被逗号分开成了2个等式……

没事，考试时间还是很充裕的。看懂题面后，我用2min就推出了p和q的式子，发现这就是一个裸的一元二次方程，对学过数竞的我毫无难度。~~（内心：这不比数竞简单多了？）~~接着用5min写完了代码。试了样例1，轻松过了。按FJ的水平，200pts应该是可以拿一等了。我以为自己胜券在握，没想到后面这道题double的玄学问题卡了我两个多小时……

打开另外给的4个样例，怎么都糊成一行，连回车都没有？幸亏我之前看过点书，据说某些情况下回车可能不能正常显示，机智的我用一个叫Notepad++的软件打开了（也是还好我之前没用过这个软件，但听说过它），便解决了这个问题。

做题时最害怕的就是明明觉得自己的代码写的都对，但就是输出了一些莫名其妙的结果。我就遇到了这种情况。其他几个大样例，本来应该输出数的地方都输出对了，但本来应该输出“NO”的地方，也输出了数字。我永远忘不了当时试了几十次的崩溃心情，因为同样的悲剧如今还在上演，只不过那天的印象最为深刻。中间还想到了二分的做法，但我觉得CCF出这题应该是考数学，就继续沿着原来的思路。

在我调代码的时候，还遇到了一件很离谱的事：我的电脑在9:09时突然卡住了，除了鼠标可以在屏幕上动，其他的程序一动不动，键盘按了也没有反应。我希望它能自己好起来，就一直傻坐着……还是向监考人员报告了，她按了一下电脑桌上的那个黑盒子，我等了一会儿，电脑就好了。时间已是9:20。

看了一下旁边的人，我右边的前面的前面貌似在T2写了几个for循环，应该是暴力枚举。我右边的前面只做了T1和T2，做完之后就摆烂了一个多小时，趴着、发呆、看考场须知。

离考试结束还有大约一个小时，我还是没有调出来，觉得自己要废了，就开了T3。因为我不知道怎么处理中缀表达式，所以决定模拟，把输入的字符串从左往右扫一遍处理，写了五六十行代码。但还是没有做出来，只能过像`1|0` 、`0&1`这样的输入数据。

T3也没有希望了，再回去看看T2，又莫名其妙地调出来了。我非常高兴，200pts应该差不多一等了，但还有点悬。突然发现T3的前几个测试点可以打表，也没时间打了，留着那五六十行代码。

T4直接不管了，交了个空文件夹上去。

最后检查一遍，发现T2没写`return 0;`吓得要死，赶紧补了上去。虽然我也不知道没写`return 0;`会不会爆零。

出了考场，看大家都一副信心满满的样子，太可怕了。“那些样例是怎么回事，都没换行”“T1那么水”……xyk说他T2写了3个for循环，问我T1要不要开long long，并表示T1非常水，肯定拿100分。

回去看了洛谷，有人说a==1时要特判，不然会TLE。我没加特判，觉得T1可能AC不了了。

保守估分90+90+0+0=180，最高分可能是 100+100+20+0=220。

本来通知周一中午出成绩，xyk明显是很想知道成绩，周一中午他就用班级电脑打开了NOI报名网站，但他又很害怕，叫我先查。我非常紧张地点进去，却显示“成绩单未上传”，扫兴而去。晚饭后他又开了，还是没有成绩。晚上回家才知道周二上午9:00出成绩。

周二上午的课间操结束了，已经过了9:00，xyk说成绩已经出了。我也知道，但我打算中午再查。午饭后，xyk马上去查了，旁边也有几个吃饭回来的同学，不过他们大多不知道是怎么一回事。cxy、hzy知道我们有参加这个比赛，在旁边看着。xykT1得了80pts,其他都是0。我T1，T2都AC了，T3居然还得了15pts。我激动得直接鼓掌！1=稳了。

确实没用到什么算法，T1入门题，T2数学题，T3可以模拟。我一个啥算法都没学的第一次参加考成这样，还算可以。

## 附录

###  考场代码

#### T1 100pts

	#include<iostream>
	#include<cstdio>
	#include<cmath>
	using namespace std;
	int a,b;
	unsigned long long ans=1;
	int main(){
		freopen("pow.in","r",stdin);
		freopen("pow.out","w",stdout);
		scanf("%d%d",&a,&b);
		for(int i=1;i<=b;i++){
			ans*=a;
			if(ans>1000000000){
				cout<<-1;
				return 0;
			}
		}
		if(ans<=1000000000)cout<<ans;
		else cout<<-1;
		return 0;
	}

倒数第4行的`if(ans<=1000000000)`、倒数第3行可以直接删去。

#### T2 100pts

	#include<iostream>
	#include<cmath>
	using namespace std;
	int k;
	long long n,e,d,pq,m,ed;
	int main(){
		freopen("decode.in","r",stdin);
		freopen("decode.out","w",stdout);
		scanf("%d",&k);
		for(int i=1;i<=k;++i){
			scanf("%lld%lld%lld",&n,&e,&d);
			ed=e*d;
			m=n+2-ed;
			pq=n;
			long long delta=m*m-4*n;
			if(delta<0){
				printf("NO\n");
				continue;
			}
			double l1=sqrt(delta);
			long long l2=l1;
			long double ls=l1-l2;
			if(l1-l2>0||l1-l2<0||l2*l2!=delta){
				printf("NO\n");
			}
			else {
				cout<<(m-l2)/2<<' '<<(m+l2)/2<<endl;
			}
		}
		return 0;
	}
	//(p-1)(q-1)+1=pq-q-p+2
	//			=n-p-q+2
	//			=e*d
	
	//pq=n;p+q=m=n-ed+2

至于那一行`long double ls=l1-l2;`根本没有用，也不知道自己当时为什么要写这个。

下一行`if(l1-l2>0||l1-l2<0||l2*l2!=delta){`赛后亲测可以把前两个条件去掉，写成`if(l2*l2!=delta){`。

#### T3 15pts

	#include<iostream>
	using namespace std;
	
	string s;
	int a,b;
	
	bool work(int l,int r){
		if(s[l]=='('){
			int j=l;
			for(;s[j]!=')';j++);
			if(j==r){
				return work(l+1,r-1); 
			}
		}
		int flg=0;
		if(l==r){
			if(s[l]=='0')return 0;
			else if(s[l]=='1')return 1;
		}
		for(int i=l;i<=r;i++){
			if(s[i]=='(')flg++;
			else if(s[i]==')')flg--;
			else if(s[i]=='&'&&flg==0){
				bool x=work(l,i-1);
				if(x==0){
					a++;
					return 0;
				}
				else {
					int k=i,flg2=0;
					for(;;k++){
						if(s[k]=='(')flg2++;
						else if(s[k]==')')flg2--;
						if((s[k]=='|'||s[k]=='&')&&flg2==0)break;
					}
					bool y=work(i+1,k);
					return x&y;
				}
			}else if(s[i]=='|'&&flg==0){
				bool x=work(l,i-1);
				if(x==1){
					b++;
					return 1;
				}
				else {
					bool y=work(i+1,r);
					return x|y;
				}   
			}//else if()
		}
	}
	int main(){
		freopen("expr.in","r",stdin);
		freopen("expr.out","w",stdout);
		cin>>s;
		cout<<work(0,s.length()-1)<<endl<<a<<' '<<b;
		return 0;
	}

其实并没有什么贴出来的必要。